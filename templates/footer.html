<!-- Footer -->
<footer class="footer mt-5 py-4 bg-dark text-light">
    <div class="container">
        <div class="row">
            <!-- Brand Column -->
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="footer-brand mb-3">
                    <h5 class="fw-bold">
                        <i class="fas fa-gamepad me-2 text-primary"></i>
                        PvPocket
                    </h5>
                    <p class="text-muted mb-3">
                        The ultimate companion app for Pokemon Trading Card Game enthusiasts. 
                        Build competitive decks, master the meta-game, and connect with trainers worldwide.
                    </p>
                </div>
                
                <!-- Social Links -->
                <div class="footer-social">
                    <a href="#" class="text-light me-3" aria-label="Twitter" title="Follow us on Twitter">
                        <i class="fab fa-twitter fa-lg"></i>
                    </a>
                    <a href="#" class="text-light me-3" aria-label="Discord" title="Join our Discord">
                        <i class="fab fa-discord fa-lg"></i>
                    </a>
                    <a href="#" class="text-light me-3" aria-label="Reddit" title="Visit our Reddit">
                        <i class="fab fa-reddit fa-lg"></i>
                    </a>
                    <a href="mailto:support@pvpocket.xyz" class="text-light" aria-label="Email" title="Contact Support">
                        <i class="fas fa-envelope fa-lg"></i>
                    </a>
                </div>
            </div>
            
            <!-- Quick Links -->
            <div class="col-lg-2 col-md-6 mb-4">
                <h6 class="fw-bold text-uppercase mb-3">Features</h6>
                <ul class="list-unstyled">
                    <li class="mb-2">
                        <a href="{{ url_for('decks.list_decks') }}" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-layer-group me-1"></i> Deck Builder
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="{{ url_for('collection.collection') }}" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-archive me-1"></i> Collection
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="{{ url_for('battle.battle') }}" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-gamepad me-1"></i> Battle Simulator
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="{{ url_for('meta.meta_rankings') }}" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-chart-line me-1"></i> Meta Rankings
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="{{ url_for('friends.friends') }}" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-users me-1"></i> Friends
                        </a>
                    </li>
                </ul>
            </div>
            
            <!-- Resources -->
            <div class="col-lg-2 col-md-6 mb-4">
                <h6 class="fw-bold text-uppercase mb-3">Resources</h6>
                <ul class="list-unstyled">
                    <li class="mb-2">
                        <a href="{{ url_for('main.about') }}" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-info-circle me-1"></i> About Us
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="{{ url_for('main.faq') }}" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-question-circle me-1"></i> FAQ
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-book me-1"></i> Strategy Guides
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-newspaper me-1"></i> News & Updates
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="mailto:support@pvpocket.xyz" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-headset me-1"></i> Support
                        </a>
                    </li>
                </ul>
            </div>
            
            <!-- Legal -->
            <div class="col-lg-2 col-md-6 mb-4">
                <h6 class="fw-bold text-uppercase mb-3">Legal</h6>
                <ul class="list-unstyled">
                    <li class="mb-2">
                        <a href="{{ url_for('main.privacy_policy') }}" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-shield-alt me-1"></i> Privacy Policy
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="{{ url_for('main.terms_of_service') }}" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-file-contract me-1"></i> Terms of Service
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-cookie-bite me-1"></i> Cookie Policy
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-balance-scale me-1"></i> DMCA Policy
                        </a>
                    </li>
                </ul>
            </div>
            
            <!-- Contact Info -->
            <div class="col-lg-2 col-md-6 mb-4">
                <h6 class="fw-bold text-uppercase mb-3">Contact</h6>
                <ul class="list-unstyled">
                    <li class="mb-2 text-muted">
                        <i class="fas fa-envelope me-2"></i>
                        <small>support@pvpocket.xyz</small>
                    </li>
                    <li class="mb-2 text-muted">
                        <i class="fas fa-envelope me-2"></i>
                        <small>feedback@pvpocket.xyz</small>
                    </li>
                    <li class="mb-2 text-muted">
                        <i class="fas fa-globe me-2"></i>
                        <small>www.pvpocket.xyz</small>
                    </li>
                    <li class="mb-2">
                        <a href="/sitemap.xml" class="text-muted text-decoration-none hover-link">
                            <i class="fas fa-sitemap me-1"></i> Sitemap
                        </a>
                    </li>
                </ul>
                
                <!-- App Stats -->
                <div class="mt-3 pt-3 border-top border-secondary">
                    <small class="text-muted">
                        <div class="d-flex justify-content-between mb-1">
                            <span>Active Users:</span>
                            <span class="fw-bold">{{ total_users or '500+' }}</span>
                        </div>
                        <div class="d-flex justify-content-between mb-1">
                            <span>Decks Created:</span>
                            <span class="fw-bold">{{ total_decks or '2.5K+' }}</span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>Battles:</span>
                            <span class="fw-bold">{{ total_battles or '10K+' }}</span>
                        </div>
                    </small>
                </div>
            </div>
        </div>
        
        <!-- Bottom Section -->
        <hr class="my-4 border-secondary">
        <div class="row align-items-center">
            <div class="col-lg-8 col-md-6">
                <div class="footer-bottom">
                    <p class="mb-2 text-muted">
                        <small>
                            &copy; {{ current_year or 2025 }} PvPocket. All rights reserved. 
                            Made with <i class="fas fa-heart text-danger"></i> for the Pokemon TCG community.
                        </small>
                    </p>
                    <p class="mb-0">
                        <small class="text-muted">
                            Pokemon and all related characters are trademarks of The Pokemon Company. 
                            PvPocket is an independent fan-made application and is not affiliated with or endorsed by 
                            The Pokemon Company, Nintendo, Game Freak, or Creatures Inc.
                        </small>
                    </p>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 text-end">
                <div class="footer-badges">
                    <span class="badge bg-primary me-2 mb-2">
                        <i class="fas fa-shield-alt me-1"></i>
                        Secure & Private
                    </span>
                    <span class="badge bg-success me-2 mb-2">
                        <i class="fas fa-leaf me-1"></i>
                        Ad-Free Experience
                    </span>
                    <span class="badge bg-info mb-2">
                        <i class="fas fa-mobile-alt me-1"></i>
                        Mobile Ready
                    </span>
                </div>
                
                <!-- Dark Mode Toggle in Footer -->
                <div class="form-check form-switch mt-3">
                    <input class="form-check-input" type="checkbox" role="switch" id="footerDarkModeToggle">
                    <label class="form-check-label text-muted" for="footerDarkModeToggle">
                        <small><i class="fas fa-moon me-1"></i>Dark Mode</small>
                    </label>
                </div>
            </div>
        </div>
        
        <!-- Performance Info (Development Only) -->
        {% if config.FLASK_DEBUG %}
        <div class="mt-3 pt-3 border-top border-secondary">
            <small class="text-muted">
                <i class="fas fa-code me-1"></i>
                Development Mode | 
                <span id="footer-load-time">Load time: --</span> |
                <span id="footer-cache-status">Cache: --</span>
            </small>
        </div>
        {% endif %}
    </div>
</footer>

<!-- Footer Styles -->
<style>
.footer {
    background: linear-gradient(135deg, #212529 0%, #343a40 100%) !important;
    border-top: 3px solid var(--bs-primary);
    margin-top: auto; /* Push footer to bottom if using flexbox layout */
}

.footer h5, .footer h6 {
    color: #fff !important;
}

.footer .hover-link:hover {
    color: var(--bs-primary) !important;
    transition: color 0.3s ease;
}

.footer-social a:hover {
    color: var(--bs-primary) !important;
    transform: translateY(-2px);
    transition: all 0.3s ease;
}

.footer-badges .badge {
    opacity: 0.9;
}

.footer-badges .badge:hover {
    opacity: 1;
    transform: scale(1.05);
    transition: all 0.2s ease;
}

/* Dark mode adjustments for footer */
[data-theme="dark"] .footer {
    background: linear-gradient(135deg, #0d1117 0%, #21262d 100%) !important;
    border-top-color: #58a6ff;
}

/* Mobile responsive adjustments */
@media (max-width: 768px) {
    .footer .col-md-6:not(:last-child) {
        margin-bottom: 2rem;
    }
    
    .footer .text-end {
        text-align: start !important;
    }
    
    .footer-social {
        text-align: center;
        margin-top: 1rem;
    }
}
</style>

<!-- Footer JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Sync footer dark mode toggle with main toggle
    const mainDarkModeToggle = document.getElementById('darkModeToggle');
    const footerDarkModeToggle = document.getElementById('footerDarkModeToggle');
    
    if (mainDarkModeToggle && footerDarkModeToggle) {
        // Sync initial state
        footerDarkModeToggle.checked = mainDarkModeToggle.checked;
        
        // Sync when footer toggle changes
        footerDarkModeToggle.addEventListener('change', function() {
            mainDarkModeToggle.checked = this.checked;
            mainDarkModeToggle.dispatchEvent(new Event('change'));
        });
        
        // Sync when main toggle changes (if triggered elsewhere)
        mainDarkModeToggle.addEventListener('change', function() {
            footerDarkModeToggle.checked = this.checked;
        });
    }
    
    // Performance info (development only)
    {% if config.FLASK_DEBUG %}
    if (typeof window.performance !== 'undefined') {
        const loadTime = Math.round(window.performance.timing.loadEventEnd - window.performance.timing.navigationStart);
        const loadTimeElement = document.getElementById('footer-load-time');
        if (loadTimeElement && loadTime > 0) {
            loadTimeElement.textContent = `Load time: ${loadTime}ms`;
        }
        
        // Cache status
        const cacheStatusElement = document.getElementById('footer-cache-status');
        if (cacheStatusElement) {
            const cacheStatus = sessionStorage.getItem('cache-status') || 'Unknown';
            cacheStatusElement.textContent = `Cache: ${cacheStatus}`;
        }
    }
    {% endif %}
    
    // Smooth scroll for internal links
    document.querySelectorAll('.footer a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
});
</script>